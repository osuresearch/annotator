"use strict";(self.webpackChunk_osuresearch_annotator=self.webpackChunk_osuresearch_annotator||[]).push([[805],{"./node_modules/react-frame-component/lib/Content.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("./node_modules/react/index.js"),_propTypes2=(_interopRequireDefault(_react),_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Content=function(_Component){function Content(){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Content),function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Content.__proto__||Object.getPrototypeOf(Content)).apply(this,arguments))}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Content,_Component),_createClass(Content,[{key:"componentDidMount",value:function componentDidMount(){this.props.contentDidMount()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.contentDidUpdate()}},{key:"render",value:function render(){return _react.Children.only(this.props.children)}}]),Content}(_react.Component);Content.propTypes={children:_propTypes2.default.element.isRequired,contentDidMount:_propTypes2.default.func.isRequired,contentDidUpdate:_propTypes2.default.func.isRequired},exports.default=Content},"./node_modules/react-frame-component/lib/Context.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.FrameContextConsumer=exports.FrameContextProvider=exports.useFrame=exports.FrameContext=void 0;var _react2=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./node_modules/react/index.js"));var doc=void 0,win=void 0;"undefined"!=typeof document&&(doc=document),"undefined"!=typeof window&&(win=window);var FrameContext=exports.FrameContext=_react2.default.createContext({document:doc,window:win}),FrameContextProvider=(exports.useFrame=function useFrame(){return _react2.default.useContext(FrameContext)},FrameContext.Provider),FrameContextConsumer=FrameContext.Consumer;exports.FrameContextProvider=FrameContextProvider,exports.FrameContextConsumer=FrameContextConsumer},"./node_modules/react-frame-component/lib/Frame.js":(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Frame=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__("./node_modules/react/index.js"),_react2=_interopRequireDefault(_react),_reactDom2=_interopRequireDefault(__webpack_require__("./node_modules/react-dom/index.js")),_propTypes2=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_Context=__webpack_require__("./node_modules/react-frame-component/lib/Context.js"),_Content2=_interopRequireDefault(__webpack_require__("./node_modules/react-frame-component/lib/Content.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Frame=exports.Frame=function(_Component){function Frame(props,context){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Frame);var _this=function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Frame.__proto__||Object.getPrototypeOf(Frame)).call(this,props,context));return _this.setRef=function(node){_this.nodeRef.current=node;var forwardedRef=_this.props.forwardedRef;"function"==typeof forwardedRef?forwardedRef(node):forwardedRef&&(forwardedRef.current=node)},_this.handleLoad=function(){clearInterval(_this.loadCheck),_this.state.iframeLoaded||_this.setState({iframeLoaded:!0})},_this.loadCheck=function(){return setInterval((function(){_this.handleLoad()}),500)},_this._isMounted=!1,_this.nodeRef=_react2.default.createRef(),_this.state={iframeLoaded:!1},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Frame,_Component),_createClass(Frame,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=!0,this.getDoc()&&this.nodeRef.current.contentWindow.addEventListener("DOMContentLoaded",this.handleLoad)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=!1,this.nodeRef.current.removeEventListener("DOMContentLoaded",this.handleLoad)}},{key:"getDoc",value:function getDoc(){return this.nodeRef.current?this.nodeRef.current.contentDocument:null}},{key:"getMountTarget",value:function getMountTarget(){var doc=this.getDoc();return this.props.mountTarget?doc.querySelector(this.props.mountTarget):doc.body.children[0]}},{key:"renderFrameContents",value:function renderFrameContents(){if(!this._isMounted)return null;var doc=this.getDoc();if(!doc)return null;var contentDidMount=this.props.contentDidMount,contentDidUpdate=this.props.contentDidUpdate,win=doc.defaultView||doc.parentView,contents=_react2.default.createElement(_Content2.default,{contentDidMount,contentDidUpdate},_react2.default.createElement(_Context.FrameContextProvider,{value:{document:doc,window:win}},_react2.default.createElement("div",{className:"frame-content"},this.props.children))),mountTarget=this.getMountTarget();return[_reactDom2.default.createPortal(this.props.head,this.getDoc().head),_reactDom2.default.createPortal(contents,mountTarget)]}},{key:"render",value:function render(){var props=_extends({},this.props,{srcDoc:this.props.initialContent,children:void 0});return delete props.head,delete props.initialContent,delete props.mountTarget,delete props.contentDidMount,delete props.contentDidUpdate,delete props.forwardedRef,_react2.default.createElement("iframe",_extends({},props,{ref:this.setRef,onLoad:this.handleLoad}),this.state.iframeLoaded&&this.renderFrameContents())}}]),Frame}(_react.Component);Frame.propTypes={style:_propTypes2.default.object,head:_propTypes2.default.node,initialContent:_propTypes2.default.string,mountTarget:_propTypes2.default.string,contentDidMount:_propTypes2.default.func,contentDidUpdate:_propTypes2.default.func,children:_propTypes2.default.oneOfType([_propTypes2.default.element,_propTypes2.default.arrayOf(_propTypes2.default.element)])},Frame.defaultProps={style:{},head:null,children:void 0,mountTarget:void 0,contentDidMount:function contentDidMount(){},contentDidUpdate:function contentDidUpdate(){},initialContent:'<!DOCTYPE html><html><head></head><body><div class="frame-root"></div></body></html>'},exports.default=_react2.default.forwardRef((function(props,ref){return _react2.default.createElement(Frame,_extends({},props,{forwardedRef:ref}))}))},"./node_modules/react-frame-component/lib/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{var _Frame=__webpack_require__("./node_modules/react-frame-component/lib/Frame.js");Object.defineProperty(exports,"ZP",{enumerable:!0,get:function get(){return function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(_Frame).default}});var _Context=__webpack_require__("./node_modules/react-frame-component/lib/Context.js");Object.defineProperty(exports,"xQ",{enumerable:!0,get:function get(){return _Context.useFrame}})},"./src/components/ExternalDocument/ExternalDocument.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AlignmentTest:()=>AlignmentTest,Simple:()=>Simple,StressTest:()=>StressTest,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ExternalDocument_stories});var react=__webpack_require__("./node_modules/react/index.js"),index_module=__webpack_require__("./node_modules/@osuresearch/ui/dist/index.module.js"),lib=__webpack_require__("./node_modules/react-frame-component/lib/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),dist=__webpack_require__("./node_modules/@tiptap/react/dist/index.js"),starter_kit_dist=__webpack_require__("./node_modules/@tiptap/starter-kit/dist/index.js"),useAnnotationsContext=__webpack_require__("./src/hooks/useAnnotationsContext.ts");function getDocumentPosition(el){const doc=el.ownerDocument,win=doc.defaultView;if(!win)return{top:-1,left:-1};const rect=el.getBoundingClientRect(),scrollLeft=win.scrollX||doc.documentElement.scrollLeft,scrollTop=win.scrollY||doc.documentElement.scrollTop;return{top:Math.round(rect.top+scrollTop),left:Math.round(rect.left+scrollLeft)}}function getTargetTextPosition(annotation){const selector=annotation.target.selector;return"TextPositionSelector"===selector?.type?{from:selector.start,to:selector.end}:"FragmentSelector"===selector?.type&&"TextPositionSelector"===selector.refinedBy?.type?{from:selector.refinedBy.start,to:selector.refinedBy.end}:{from:0,to:0}}var useAnchorsContext=__webpack_require__("./src/hooks/useAnchorsContext.ts");var useAnnotationPicker=__webpack_require__("./src/hooks/useAnnotationPicker.ts"),core_dist=__webpack_require__("./node_modules/@tiptap/core/dist/index.js");const Comment=core_dist.vc.create({name:"comment",addOptions:()=>({HTMLAttributes:{}}),addAttributes:()=>({comment:{default:null,parseHTML:el=>el.getAttribute("data-comment"),renderHTML:attrs=>({"data-comment":attrs.comment})},color:{default:"#bb0000",parseHTML:el=>el.getAttribute("data-comment-color"),renderHTML:attrs=>({"data-comment-color":attrs.color})}}),parseHTML:()=>[{tag:"comment-view[data-comment]",getAttrs:el=>!!el.getAttribute("data-comment")?.trim()&&null}],renderHTML({HTMLAttributes}){return["comment-view",(0,core_dist.P1)(this.options.HTMLAttributes,HTMLAttributes),0]},onCreate(){},addStorage:()=>({users:[]}),addCommands:()=>({setComment:comment=>({commands})=>commands.setMark("comment",{comment,color:"green"}),toggleComment:()=>({commands})=>commands.toggleMark("comment"),unsetComment:()=>({commands})=>commands.unsetMark("comment")})}),CommentFocus=core_dist.vc.create({name:"comment-focus",addOptions:()=>({HTMLAttributes:{}}),addAttributes:()=>({comment:{default:null,parseHTML:el=>el.getAttribute("data-comment"),renderHTML:attrs=>({"data-comment":attrs.comment})}}),parseHTML:()=>[{tag:"comment-view[data-comment]",getAttrs:el=>!!el.getAttribute("data-comment")?.trim()&&null}],renderHTML({HTMLAttributes}){return["comment-focus-view",(0,core_dist.P1)(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:()=>({setCommentFocus:comment=>({commands})=>commands.setMark("comment-focus",{comment}),toggleCommentFocus:()=>({commands})=>commands.toggleMark("comment-focus"),unsetCommentFocus:()=>({commands})=>commands.unsetMark("comment-focus")})});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const AnnotatedTextField=(0,react.forwardRef)((({name,content},ref)=>{const{window}=(0,lib.xQ)(),{select}=(0,useAnnotationPicker.i)(),{annotations,focused,focus}=(0,useAnnotationsContext.i)(),trackedAnnotations=function filterAnnotations(annotations,source,includeDeleted,includeResolved){return annotations.filter((t=>{const selector=t.target.selector;if("FragmentSelector"!==selector?.type||selector.value!==source)return!1;const thread=t.body.find((b=>"Thread"===b.type)),reply=t.body.find((b=>"ThreadReply"===b.type));return!(!includeDeleted&&thread?.deleted||reply?.deleted||!includeResolved&&thread?.resolved)}))}(annotations,name,!0,!0),editor=(0,dist.jE)({extensions:[starter_kit_dist.Z.configure({history:!1}),Comment.configure({}),CommentFocus.configure({})],onSelectionUpdate:({editor})=>{const{from,to,empty,$from,$head,$anchor}=editor.state.selection,mark=editor.isActive("comment");if(!editor.isActive("comment-focus"))if(!empty&&to-from>1){const fromPos=editor.view.coordsAtPos(from);select({targetField:name,type:"highlight",top:fromPos.top+(window?.scrollY??0),start:from,end:to})}else if(mark&&editor.isFocused){const id=editor.getAttributes("comment").comment;focus(id)}},editorProps:{attributes:{spellcheck:"false",tabindex:"0"}},content,editable:!1}),hasFocusedAnnotation="FragmentSelector"===focused?.target.selector?.type&&focused.target.selector.value===name;return function useTiptapAnnotations(source,editor,annotations,focused){const annotationCount=(0,react.useRef)(0),focusId=(0,react.useRef)(void 0),{addAnchors}=(0,useAnchorsContext.T)();(0,react.useEffect)((()=>{if(!editor)return;const redrawMarks=()=>{const commands=editor.chain().selectAll().unsetComment().unsetCommentFocus();if(annotations.forEach((t=>{if(!t.body)return void console.error(t);const{deleted,resolved}=t.body.find((b=>"Thread"===b.type));deleted||resolved||commands.setTextSelection(getTargetTextPosition(t)).setComment(t.id)})),focused){const{deleted}=focused.body.find((b=>"Thread"===b.type));deleted||commands.setTextSelection(getTargetTextPosition(focused)).setCommentFocus(focused.id)}commands.setTextSelection(0).run();const anchors=[];editor.view.dom.querySelectorAll("comment-view").forEach((el=>{const pos=getDocumentPosition(el);anchors.push({id:el.dataset.comment,type:"tmp",source,target:{x:pos.left,y:pos.top,width:0,height:0}})})),console.log("new anchors",anchors),addAnchors(anchors)};if(annotations.length!==annotationCount.current)return annotationCount.current=annotations.length,void redrawMarks();focusId.current!==focused?.id&&(focusId.current=focused?.id,redrawMarks())}),[editor,annotations,annotationCount,focusId,focused,addAnchors])}(name,editor,trackedAnnotations,hasFocusedAnnotation?focused:void 0),(0,jsx_runtime.jsx)("div",{ref,children:(0,jsx_runtime.jsx)(dist.kg,{editor})})}));try{AnnotatedTextField.displayName="AnnotatedTextField",AnnotatedTextField.__docgenInfo={description:"A reviewable element can contain multiple selection ranges,\neach tied to a comment thread.\n\nNew threads can be added created by selecting new ranges,\nand clicking a range associated with a thread will focus\nthat thread for the user to interact with.\n\nTODO: Break this component down more. Anchor is a good candidate for some of this\n(at least the positioning pieces)\n\nNOTE: Don't need forwardRef anymore",displayName:"AnnotatedTextField",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/AnnotatedTextField/AnnotatedTextField.tsx#AnnotatedTextField"]={docgenInfo:AnnotatedTextField.__docgenInfo,name:"AnnotatedTextField",path:"src/components/AnnotatedTextField/AnnotatedTextField.tsx#AnnotatedTextField"})}catch(__react_docgen_typescript_loader_error){}function _HighlightAnchor({source}){const{document}=(0,lib.xQ)(),[target,setTarget]=(0,react.useState)(),[dom,setDOM]=(0,react.useState)();return(0,react.useEffect)((()=>{if(!document)return;const el=document.getElementById(source);el&&(setTarget(el),setDOM(el.innerHTML),el.innerHTML="")}),[document,source]),dom&&document?target?(0,react_dom.createPortal)((0,jsx_runtime.jsx)(AnnotatedTextField,{name:source,content:dom}),target):null:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}const HighlightAnchor=(0,react.memo)(_HighlightAnchor);try{HighlightAnchor.displayName="HighlightAnchor",HighlightAnchor.__docgenInfo={description:"",displayName:"HighlightAnchor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"highlight"'},{value:'"note"'},{value:'"tmp"'}]}},source:{defaultValue:null,description:"",name:"source",required:!0,type:{name:"string"}},target:{defaultValue:null,description:"Target rect in the document to anchor *to*",name:"target",required:!0,type:{name:"Rect"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ExternalDocument/HighlightAnchor.tsx#HighlightAnchor"]={docgenInfo:HighlightAnchor.__docgenInfo,name:"HighlightAnchor",path:"src/components/ExternalDocument/HighlightAnchor.tsx#HighlightAnchor"})}catch(__react_docgen_typescript_loader_error){}var parse_hotkey=__webpack_require__("./node_modules/@mantine/hooks/esm/use-hotkeys/parse-hotkey.js");const NotesButton=styled_components_browser_esm.ZP.button`
  border-radius: 3px;
  background: white;
  color: black;
  border: 1px solid grey;
  border-radius: 0;
  padding: 4px;
  margin: 4px;

  z-index: 999;

  // TODO: Deal with positioning. I can't guarantee a parent isn't
  // a relative position or not. I'd *like* these to be document-absolute,
  // but that means they can't be children of the target in the DOM.
  position: absolute;
  right: 0;
  display: none;

  &:hover {
    background: grey;
    cursor: pointer;
  }

  /* &[data-selected] {
    background: yellow;
  } */

  &[data-focused] {
    background: yellow;
  }

  &[data-threads] {
    display: block;
  }
`;function NoteAnchorImpl({anchor,el}){const{threads,isFocused,create,focusNext}=function useThreads(source,includeResolved=!1){const{annotations,focused,createThread,focus}=(0,useAnnotationsContext.i)(),[threads,setThreads]=(0,react.useState)([]);(0,react.useEffect)((()=>{const visible=annotations.filter((t=>{const selector=t.target.selector;if("FragmentSelector"!==selector?.type||selector.value!==source)return!1;const{deleted,resolved}=t.body.find((b=>"Thread"===b.type));return!deleted&&(!resolved||includeResolved)}));threads.length===visible.length&&threads.every(((t,i)=>t.id===visible[i].id))||setThreads(visible)}),[annotations,source,threads,includeResolved]);const isFocused=!!focused&&threads.findIndex((t=>t.id===focused.id))>=0;return{threads,isFocused,create:(motivation,selector)=>createThread(motivation,selector),focus:thread=>focus(thread.id),focusNext:()=>{if(!(threads.length<1)){if(!isFocused||focused)for(let i=0;i<threads.length;i++)if(threads[i].id===focused?.id&&i<threads.length-1)return void focus(threads[i+1].id);focus(threads[0].id)}}}}(anchor.source);!function useAnnotationFocus(source,type,el){const{window}=(0,lib.xQ)(),{selected,select}=(0,useAnnotationPicker.i)();return(0,react.useEffect)((()=>{const onFocus=e=>{const rect=e.target.getBoundingClientRect();select({targetField:source,type,top:rect.top+(window?.scrollY??0)})},onBlur=e=>{selected?.targetField===source&&select(void 0)};return el.tabIndex=0,el.addEventListener("focus",onFocus),el.addEventListener("blur",onBlur),()=>{el.removeEventListener("focus",onFocus),el.removeEventListener("blur",onBlur)}}),[el,source,type,selected,select,window]),{isFocused:selected?.targetField===source}}(anchor.source,"note",el),(0,react.useEffect)((()=>{const handler=(0,parse_hotkey.yr)([["mod+alt+M",()=>{create("commenting",{type:"FragmentSelector",value:""})}]]);return el.addEventListener("keydown",handler),()=>el.removeEventListener("keydown",handler)}),[el,create]);return(0,react_dom.createPortal)((0,jsx_runtime.jsxs)(NotesButton,{onClick:e=>{focusNext(),e.preventDefault()},"data-focused":isFocused?"true":void 0,"data-threads":threads.length>0?threads.length:void 0,children:["📝 ",threads.length]}),el)}function NoteAnchor(anchor){const{document}=(0,lib.xQ)(),[target,setTarget]=(0,react.useState)(),{addAnchors}=(0,useAnchorsContext.T)(),position=function useElementPosition(ref){const[rect,setRect]=(0,react.useState)((()=>{if(ref){const position=getDocumentPosition(ref);return{x:Math.round(position.left),y:Math.round(position.top),width:Math.round(ref.clientWidth),height:Math.round(ref.clientHeight)}}return{x:0,y:0,width:0,height:0}}));return(0,react.useEffect)((()=>{if(!ref)return;let prev=rect;const handle=setInterval((()=>{const position=getDocumentPosition(ref),r={x:Math.round(position.left),y:Math.round(position.top),width:Math.round(ref.clientWidth),height:Math.round(ref.clientHeight)};r.x===prev.x&&r.y===prev.y&&r.width===prev.width&&r.height===prev.height||(console.log("POSITION",r,prev),prev=r,setRect(r))}),1e3);return()=>clearInterval(handle)}),[ref]),rect}(target);return(0,react.useEffect)((()=>{console.log("update position",anchor,position),addAnchors([{...anchor,target:position}])}),[anchor,position]),(0,react.useEffect)((()=>{setTarget(document?.getElementById(anchor.source)??void 0)}),[anchor.source,document]),target?(0,jsx_runtime.jsx)(NoteAnchorImpl,{anchor,el:target}):null}NoteAnchor.displayName="NoteAnchor";try{NoteAnchor.displayName="NoteAnchor",NoteAnchor.__docgenInfo={description:"",displayName:"NoteAnchor",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"highlight"'},{value:'"note"'},{value:'"tmp"'}]}},source:{defaultValue:null,description:"",name:"source",required:!0,type:{name:"string"}},target:{defaultValue:null,description:"Target rect in the document to anchor *to*",name:"target",required:!0,type:{name:"Rect"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ExternalDocument/NoteAnchor.tsx#NoteAnchor"]={docgenInfo:NoteAnchor.__docgenInfo,name:"NoteAnchor",path:"src/components/ExternalDocument/NoteAnchor.tsx#NoteAnchor"})}catch(__react_docgen_typescript_loader_error){}function _Controller(){const{document}=(0,lib.xQ)(),{items,addAnchors}=(0,useAnchorsContext.T)();return document?((0,react.useEffect)((()=>{if(!document)return;const anchors=[];document.querySelectorAll("[data-comment-block]").forEach((el=>{const pos=getDocumentPosition(el);anchors.push({type:"note",source:el.id,target:{x:pos.left,y:pos.top,width:0,height:0}})})),document.querySelectorAll("[data-comment-inline]").forEach((el=>{const pos=getDocumentPosition(el);anchors.push({type:"highlight",source:el.id,target:{x:pos.left,y:pos.top,width:0,height:0}})})),addAnchors(anchors)}),[document]),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(styled_components_browser_esm.LC,{target:document.head,children:(0,jsx_runtime.jsx)("div",{children:items.filter((a=>"tmp"!==a.type)).map((anchor=>"highlight"===anchor.type?(0,jsx_runtime.jsx)(HighlightAnchor,{...anchor},anchor.id):(0,jsx_runtime.jsx)(NoteAnchor,{...anchor},anchor.id)))})})})):null}_Controller.displayName="_Controller";const Controller=(0,react.memo)(_Controller);try{Controller.displayName="Controller",Controller.__docgenInfo={description:"Controller is injected into the iframe DOM for\nmanaging targets (anchors) for annotations",displayName:"Controller",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ExternalDocument/Controller.tsx#Controller"]={docgenInfo:Controller.__docgenInfo,name:"Controller",path:"src/components/ExternalDocument/Controller.tsx#Controller"})}catch(__react_docgen_typescript_loader_error){}function SectionList({anchors}){return(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("ol",{children:anchors.map((props=>(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsx)(index_module.zx,{variant:"subtle",style:{marginLeft:16*props.level},onPress:e=>{return(target=props.el).scrollIntoView(),void target.focus();var target},children:props.title.substring(0,50)})},props.id)))})})}function TableOfContents({document}){const[anchors,setAnchors]=(0,react.useState)([]);(0,react.useEffect)((()=>{if(!document)return;const anchorProps=[];document.querySelectorAll("[data-comment-section]").forEach((el=>{anchorProps.push({el,id:el.id,title:el.dataset.commentSection??el.id,level:parseInt(el.dataset.commentSectionLevel??"0")}),el.tabIndex=-1})),console.log("sections",anchorProps),setAnchors(anchorProps)}),[document]);const[open,setOpen]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)(index_module.Kq,{children:[(0,jsx_runtime.jsx)(index_module.hU,{size:24,label:"Toggle table of contents",variant:"fade",name:"tableOfContents",onPress:()=>setOpen(!open)}),open&&(0,jsx_runtime.jsx)(SectionList,{anchors})]})}SectionList.displayName="SectionList",TableOfContents.displayName="TableOfContents";try{TableOfContents.displayName="TableOfContents",TableOfContents.__docgenInfo={description:"",displayName:"TableOfContents",props:{document:{defaultValue:null,description:"The DOM Document to extract a table of contents from.\n\nThis may either be an iframed document or a\nlive React document.",name:"document",required:!1,type:{name:"Document"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/TableOfContents/TableOfContents.tsx#TableOfContents"]={docgenInfo:TableOfContents.__docgenInfo,name:"TableOfContents",path:"src/components/TableOfContents/TableOfContents.tsx#TableOfContents"})}catch(__react_docgen_typescript_loader_error){}var dist_import=__webpack_require__("./node_modules/@react-aria/interactions/dist/import.mjs");const Panel=styled_components_browser_esm.ZP.div`
  position: absolute;
  right: 0;
  transition: 200ms;
  background: var(--rui-light);
  border: 2px solid var(--rui-light-shade);
  flex-direction: column;
  margin-right: 4px;
`;styled_components_browser_esm.ZP.button`
  background: none;
  border: 0;
`;function ActionsSidebar(){const{selected,select}=(0,useAnnotationPicker.i)(),{createThread}=(0,useAnnotationsContext.i)(),[isFocusWithin,onFocusWithinChange]=(0,react.useState)(!1),{focusWithinProps}=(0,dist_import.L_)({onFocusWithinChange}),[top,setTop]=(0,react.useState)(0),[prev,setPrev]=(0,react.useState)(),[active,setActive]=(0,react.useState)(),startThread=motivation=>{if(!active)return;createThread("commenting",{type:"FragmentSelector",value:active.targetField,refinedBy:active.start&&active.end?{type:"TextPositionSelector",start:active.start,end:active.end}:void 0})};return(0,react.useEffect)((()=>{selected&&setTop(selected.top),selected&&setPrev(selected)}),[selected]),(0,react.useEffect)((()=>{setActive(isFocusWithin?prev:selected)}),[isFocusWithin,prev,selected]),(0,jsx_runtime.jsxs)(Panel,{style:{top,display:active?"flex":"none"},...focusWithinProps,children:[(0,jsx_runtime.jsx)(index_module.u,{contentSlot:"Ask a question",children:(0,jsx_runtime.jsx)(index_module.hU,{name:"questioningComment",label:"Ask a question",size:24,onPress:()=>startThread()})}),(0,jsx_runtime.jsx)(index_module.u,{contentSlot:"Add a comment",children:(0,jsx_runtime.jsx)(index_module.hU,{name:"addComment",label:"Add a comment",size:24,onPress:()=>startThread()})}),(0,jsx_runtime.jsx)(index_module.u,{contentSlot:"Make a suggestion",children:(0,jsx_runtime.jsx)(index_module.hU,{name:"suggestionComment",label:"Make a suggestion",size:24})})]})}ActionsSidebar.displayName="ActionsSidebar";var useAnchors=__webpack_require__("./src/hooks/useAnchors.ts"),ThreadList=__webpack_require__("./src/components/ThreadList/ThreadList.tsx");styled_components_browser_esm.ZP.div`
  // A4 page size
  /* min-width: 21cm; */
  /* height: 29.7cm;
  margin: 30mm 45mm 30mm 45mm; */
  display: flex;
  flex-direction: row;

  border: 1px solid red;
`,styled_components_browser_esm.ZP.div`
  border: 1px solid green;
  background: #fff;

  min-width: 21cm;
  width: 21cm;
  padding: 64px;
`;function ExternalDocument(props){const frameRef=(0,react.useRef)(null),listRef=(0,react.useRef)(null);(0,react.useLayoutEffect)((()=>{if(!frameRef.current)return;let handle,prev=0;const watch=()=>{const container=frameRef.current?.contentWindow?.document.body;cancelAnimationFrame(handle),container&&prev!==container.scrollHeight&&(prev=container.scrollHeight,frameRef.current.height=prev+64+"px"),handle=requestAnimationFrame(watch)};return handle=requestAnimationFrame(watch),()=>cancelAnimationFrame(handle)}),[frameRef,listRef]);const ctx=(0,useAnchors.q)(),document=frameRef.current?.contentWindow?.document;return(0,jsx_runtime.jsx)(useAnchors._.Provider,{value:ctx,children:(0,jsx_runtime.jsxs)(index_module.ZA,{bgc:"light",justify:"center",miw:"calc(21cm + 400px)",py:"md",align:"stretch",gap:0,children:[document&&(0,jsx_runtime.jsx)(TableOfContents,{document}),(0,jsx_runtime.jsxs)(index_module.Xk,{w:"21cm",miw:"21cm",p:"xxl",withBorder:!0,shadow:"md",children:[(0,jsx_runtime.jsx)(lib.ZP,{ref:frameRef,initialContent:props.content,head:(0,jsx_runtime.jsx)("style",{children:"\n  comment-view[data-comment] {\n    background-color: yellow;\n  }\n\n  comment-focus-view[data-comment] {\n    background-color: gold;\n    text-decoration: underline;\n  }\n\n  [data-comment-block]:hover {\n    cursor: pointer;\n    background-color: lightyellow;\n  }\n"}),onLoad:e=>e.stopPropagation(),style:{width:"100%",margin:0},children:(0,jsx_runtime.jsx)(Controller,{})}),(0,jsx_runtime.jsx)(ActionsSidebar,{})]}),(0,jsx_runtime.jsx)(index_module.Kq,{align:"stretch",w:400,miw:400,pt:"xxl",className:"threads",children:(0,jsx_runtime.jsx)(ThreadList.o,{ref:listRef})})]})})}ExternalDocument.displayName="ExternalDocument";try{ExternalDocument.displayName="ExternalDocument",ExternalDocument.__docgenInfo={description:"Container for a reviewable document that was generated through\nan external HTML renderer.\n\nDocument content is rendered within a controlled iframe\nand tagged elements are converted into controlled React\ncomponents through a portal.\n\n## 📖 Storybook Dev Mode\n\nNote that running this in Storybook dev mode may occasionally break\ndue to hot reloading. The component is built to be mounted once.",displayName:"ExternalDocument",props:{content:{defaultValue:null,description:"DOM content to render as a reviewable document.\n\nThis cannot be changed once the component has mounted.",name:"content",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ExternalDocument/ExternalDocument.tsx#ExternalDocument"]={docgenInfo:ExternalDocument.__docgenInfo,name:"ExternalDocument",path:"src/components/ExternalDocument/ExternalDocument.tsx#ExternalDocument"})}catch(__react_docgen_typescript_loader_error){}var AnnotationsProvider=__webpack_require__("./src/components/AnnotationsProvider/AnnotationsProvider.tsx");const shortFormAnnotations=[{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"617cf321-fac1-4a1d-a235-224bf28faff0",motivation:"commenting",created:"2023-03-10T16:45:37.514Z",modified:"2023-03-10T16:45:37.514Z",creator:{type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},target:{id:"mock-document",selector:{type:"FragmentSelector",value:"field13",refinedBy:{type:"TextPositionSelector",start:48,end:74}}},body:[{type:"TextualBody",value:"<p>And an inline for Nullam egestas urna risus of section 4</p>",format:"text/html",language:"en"},{type:"Thread",role:"Test",requiresResponse:!1,resolved:!1,deleted:!1,recoverable:!0}]},{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"94a71eb5-a90e-4695-b2a8-556428d5416c",motivation:"replying",created:"2023-03-10T16:49:04.065Z",modified:"2023-03-10T16:49:04.065Z",creator:{type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},target:{id:"9d26aaef-5c1c-4c46-88f0-60f69de6ed9e"},body:[{type:"TextualBody",value:"<p>And a reply about that 2.2 </p>",format:"text/html",language:"en"},{type:"ThreadReply",role:"Test",deleted:!1,recoverable:!0}]},{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"47509192-8945-4522-b251-2aba3a7f22df",motivation:"replying",created:"2023-03-10T16:49:08.321Z",modified:"2023-03-10T16:49:08.321Z",creator:{type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},target:{id:"9d26aaef-5c1c-4c46-88f0-60f69de6ed9e"},body:[{type:"TextualBody",value:"<p>With another reply about it.</p>",format:"text/html",language:"en"},{type:"ThreadReply",role:"Test",deleted:!1,recoverable:!0}]},{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"ca3c2575-44c1-4af5-8fd4-5cd46ffa5dcd",motivation:"commenting",created:"2023-03-10T16:44:38.927Z",modified:"2023-03-10T16:44:38.927Z",creator:{type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},target:{id:"mock-document",selector:{type:"FragmentSelector",value:"field1",refinedBy:{type:"TextPositionSelector",start:32,end:58}}},body:[{type:"TextualBody",value:"<p>inline comment for Lorem ipsum dolor sit amet</p>",format:"text/html",language:"en"},{type:"Thread",role:"Test",requiresResponse:!1,resolved:!1,deleted:!1,recoverable:!0}]},{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"b92f78c4-94ef-4c16-8cfa-444a3a40ecb5",motivation:"commenting",created:"2023-03-10T16:44:49.542Z",modified:"2023-03-10T16:44:49.542Z",creator:{type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},target:{id:"mock-document",selector:{type:"FragmentSelector",value:"field1",refinedBy:{type:"TextPositionSelector",start:244,end:271}}},body:[{type:"TextualBody",value:"<p>And an inline for Vestibulum eu aliquet ipsum in section 2</p>",format:"text/html",language:"en"},{type:"Thread",role:"Test",requiresResponse:!1,resolved:!1,deleted:!1,recoverable:!0}]},{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"9d26aaef-5c1c-4c46-88f0-60f69de6ed9e",motivation:"commenting",created:"2023-03-10T16:45:06.273Z",modified:"2023-03-10T16:45:06.273Z",creator:{type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},target:{id:"mock-document",selector:{type:"FragmentSelector",value:"field6"}},body:[{type:"TextualBody",value:"<p>Block level comment for subsection 2.2</p>",format:"text/html",language:"en"},{type:"Thread",role:"Test",requiresResponse:!1,resolved:!1,deleted:!1,recoverable:!0}]},{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"06e98c5b-00f7-42a9-8651-fa46832d6439",motivation:"commenting",created:"2023-03-10T16:45:19.907Z",modified:"2023-03-10T16:45:19.907Z",creator:{type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},target:{id:"mock-document",selector:{type:"FragmentSelector",value:"field8"}},body:[{type:"TextualBody",value:"<p>Block comment for Curabitur vel turpis</p>",format:"text/html",language:"en"},{type:"Thread",role:"Test",requiresResponse:!1,resolved:!1,deleted:!1,recoverable:!0}]},{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"2a068ceb-f83f-4fc8-92bb-7f895616d4e1",motivation:"commenting",created:"2023-03-10T16:45:30.301Z",modified:"2023-03-10T16:45:30.301Z",creator:{type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},target:{id:"mock-document",selector:{type:"FragmentSelector",value:"field12"}},body:[{type:"TextualBody",value:"<p>Block comment for Proin sit amet turpis</p>",format:"text/html",language:"en"},{type:"Thread",role:"Test",requiresResponse:!1,resolved:!1,deleted:!1,recoverable:!0}]},{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"7aab03d9-4005-4ca2-8830-4cdcccec54fa",motivation:"commenting",created:"2023-03-10T16:48:09.045Z",modified:"2023-03-10T16:48:09.045Z",creator:{type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},target:{id:"mock-document",selector:{type:"FragmentSelector",value:"field5",refinedBy:{type:"TextPositionSelector",start:49,end:166}}},body:[{type:"TextualBody",value:"<p>Subsection 2.1 Nullam egestas urna risus, nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit ut at diam.</p>",format:"text/html",language:"en"},{type:"Thread",role:"Test",requiresResponse:!1,resolved:!1,deleted:!1,recoverable:!0}]},{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"31b7810d-f21f-4a23-a13a-cce093f25df8",motivation:"replying",created:"2023-03-10T16:48:25.842Z",modified:"2023-03-10T16:48:25.842Z",creator:{type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},target:{id:"7aab03d9-4005-4ca2-8830-4cdcccec54fa"},body:[{type:"TextualBody",value:"<p>And some reply about that</p>",format:"text/html",language:"en"},{type:"ThreadReply",role:"Test",deleted:!1,recoverable:!0}]},{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"d467008c-0370-4000-a80e-f6e4eedd6ed9",motivation:"replying",created:"2023-03-10T16:48:36.929Z",modified:"2023-03-10T16:48:36.929Z",creator:{type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},target:{id:"ca3c2575-44c1-4af5-8fd4-5cd46ffa5dcd"},body:[{type:"TextualBody",value:"<p>And a reply about lorem ipsum</p>",format:"text/html",language:"en"},{type:"ThreadReply",role:"Test",deleted:!1,recoverable:!0}]}],annotations=[{"@context":["https://www.w3.org/ns/anno.jsonld"],id:"a1560fa8-965d-4b8a-84af-dcc2eabf4b26",type:"Annotation",motivation:"commenting",body:[{type:"TextualBody",value:"<p>Praesent consectetur <strong>scelerisque blandit</strong>.</p>",format:"text/html",language:"en"},{type:"Thread",role:"Reviewer",requiresResponse:!1,resolved:!1,deleted:!1,recoverable:!0}],target:{id:"mock-document",selector:{type:"FragmentSelector",value:"section-0",refinedBy:{type:"TextPositionSelector",start:451,end:462}}},creator:{type:"Person",id:"test",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},created:"2023-02-24T15:40:45Z",modified:"2023-02-24T15:40:45Z"},{"@context":["https://www.w3.org/ns/anno.jsonld"],id:"7334d7fb-3c7b-4454-8e02-7e5ce4f7e2a1",type:"Annotation",motivation:"commenting",body:[{type:"TextualBody",value:"Suspendisse potenti. Nulla in lectus quis sapien dignissim finibus ac vel sapien. Quisque eu lacus massa. Nam odio lorem, porttitor sed fringilla luctus, facilisis quis tortor. Integer eget pretium libero, eu gravida magna.",format:"text/html",language:"en"},{type:"Thread",role:"Reviewer",requiresResponse:!1,resolved:!1,deleted:!1,recoverable:!0}],target:{id:"mock-document",selector:{type:"FragmentSelector",value:"section-0",refinedBy:{type:"TextPositionSelector",start:397,end:411}}},creator:{type:"Person",id:"test",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},created:"2023-02-24T15:40:45Z",modified:"2023-02-24T15:40:45Z"},{"@context":["https://www.w3.org/ns/anno.jsonld"],id:"1f86b7be-fb2d-8405-72h2-6afaca8c8a6",type:"Annotation",motivation:"commenting",body:[{type:"TextualBody",value:"Mauris finibus, urna sit amet euismod pellentesque, dolor diam hendrerit diam, eu rhoncus justo nisi non turpis. ",format:"text/html",language:"en"},{type:"Thread",role:"Reviewer",requiresResponse:!1,resolved:!1,deleted:!1,recoverable:!0}],target:{id:"mock-document",selector:{type:"FragmentSelector",value:"section-0",refinedBy:{type:"TextPositionSelector",start:556,end:614}}},creator:{type:"Person",id:"test",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},created:"2023-02-24T15:40:45Z",modified:"2023-02-24T15:40:45Z"},{"@context":["https://www.w3.org/ns/anno.jsonld"],id:"944fd074-4c0b-42f1-bc22-a6dc5983bf2a",type:"Annotation",motivation:"commenting",body:[{type:"TextualBody",value:"<p>This comment is near the end of the document</p>.",format:"text/html",language:"en"},{type:"Thread",role:"Analyst",requiresResponse:!1,resolved:!1,deleted:!1,recoverable:!0}],target:{id:"mock-document",selector:{type:"FragmentSelector",value:"section-95",refinedBy:{type:"TextPositionSelector",start:235,end:366}}},creator:{type:"Person",id:"test",name:"Neil",email:"coplin.7@osu.edu",nickname:"coplin.7"},created:"2023-02-24T15:40:45Z",modified:"2023-02-24T15:40:45Z"}],ExternalDocument_stories={title:"Components/ExternalDocument",component:ExternalDocument,argTypes:{}},demoContent='\n<!DOCTYPE html>\n<html>\n  <head>\n    <style>\n      * {\n        color: purple;\n      }\n      h1 {\n        color: green;\n      }\n\n      .box {\n        position: relative;\n        border: 1px solid black;\n        max-width: 50%;\n        padding: 4px;\n        margin: 4px;\n      }\n    </style>\n  </head>\n  <body>\n    <header>\n      Header content\n    </header>\n    <main>\n      <h1>Heading level 1</h1>\n\n      <p>Before section 1</p>\n\n      <div id="section1" data-section="Section 1">\n        <div id="section1-content" data-comment-inline>\n          👉  Content for section 1\n        </div>\n      </div>\n\n      <p>After section 1</p>\n\n      <h2>Heading for section 2</h2>\n\n      <p>Content before section 2 reviewables</p>\n\n      <div id="section2" data-comment-section="Section 2">\n        <div id="field1" data-comment-inline>\n          👉 <strong>Rich</strong> content for <a href="#section2">section 2</a>. Lorem ipsum\n          dolor sit amet, consectetur adipiscing elit. Donec nec sapien dolor.\n          Suspendisse sed erat vehicula tortor porta tincidunt at eget dui. Quisque nibh\n          leo, auctor id odio nec, viverra vestibulum mauris. Vestibulum eu aliquet ipsum.\n          Pellentesque interdum dignissim lorem, sit amet dictum velit.\n        </div>\n\n        <div id="field2" data-comment-block>\n          This is content that can be block-commented on\n        </div>\n\n        <div id="field3" data-comment-block>\n          This is additional content that can be block-commented on. Donec nec sapien dolor.\n          Suspendisse sed erat vehicula tortor porta tincidunt at eget dui.\n        </div>\n\n        <div id="field4" data-comment-block>\n          This is even more content that can be block-commented on. Quisque nibh\n          leo, auctor id odio nec, viverra vestibulum mauris. Vestibulum eu aliquet ipsum.\n          Pellentesque interdum dignissim lorem, sit amet dictum velit.\n        </div>\n      </div>\n\n      <p>Content after section 2 reviewables</p>\n\n      <h3 id="heading2-1" data-comment-block>Heading for subsection 2.1</h3>\n\n      <div id="section2-1" data-comment-section="Subsection 2.1" data-comment-section-level="1">\n        <div id="field5" data-comment-inline>\n          Aliquam scelerisque mauris non aliquet iaculis. Nullam egestas urna risus,\n          nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit\n          ut at diam. Vivamus pretium erat non enim hendrerit, id auctor metus lobortis.\n          Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc\n          in tortor non arcu suscipit vestibulum at nec neque. Vivamus fringilla velit arcu,\n          in hendrerit turpis dignissim vel. Duis imperdiet lobortis tortor non ultrices.\n          Cras pretium dui a turpis condimentum, sit amet sollicitudin diam auctor. In porta\n          neque sit amet turpis tempus egestas.\n        </div>\n      </div>\n\n      <h3>Heading for subsection 2.2</h3>\n\n      <div id="section2-2" data-comment-section="Subsection 2.2" data-comment-section-level="1">\n        <div id="field6" data-comment-inline>\n          <p>Aliquam scelerisque mauris non aliquet iaculis. Nullam egestas urna risus,\n          nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit\n          ut at diam. Vivamus pretium erat non enim hendrerit, id auctor metus lobortis.</p>\n\n          <p>Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc\n          in tortor non arcu suscipit vestibulum at nec neque.</p>\n\n          <ul>\n            <li>Curabitur vel turpis nec odio consequat vulputate ac non enim.</li>\n            <li>Ut pulvinar lacus id ipsum maximus convallis.</li>\n            <li>Etiam mattis nibh eu sollicitudin hendrerit.</li>\n            <li>Cras convallis ipsum at risus suscipit sodales.</li>\n            <li>Proin sit amet turpis mattis nunc sagittis dapibus.</li>\n          </ul>\n\n          <p>Vivamus fringilla velit arcu,\n          in hendrerit turpis dignissim vel. Duis imperdiet lobortis tortor non ultrices.\n          Cras pretium dui a turpis condimentum, sit amet sollicitudin diam auctor. In porta\n          neque sit amet turpis tempus egestas.</p>\n        </div>\n      </div>\n\n      <h2>Heading for section 3</h2>\n\n      <div id="section3" data-comment-section="Section 3">\n        <div id="field7" data-comment-inline>\n          Aliquam scelerisque mauris non aliquet iaculis. Nullam egestas urna risus,\n          nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit\n          ut at diam. Vivamus pretium erat non enim hendrerit, id auctor metus lobortis.\n          Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc\n          in tortor non arcu suscipit vestibulum at nec neque. Vivamus fringilla velit arcu,\n          in hendrerit turpis dignissim vel. Duis imperdiet lobortis tortor non ultrices.\n          Cras pretium dui a turpis condimentum, sit amet sollicitudin diam auctor. In porta\n          neque sit amet turpis tempus egestas.\n        </div>\n\n        <p>\n          Each li in the below are a separate field with data-comment-block\n          and some document-specific styles to wrap contents in a relative\n          position box.\n        </p>\n\n        <ul>\n          <li class="box" id="field8" data-comment-block>Curabitur vel turpis nec odio consequat vulputate ac non enim.</li>\n          <li class="box" id="field9" data-comment-block>Ut pulvinar lacus id ipsum maximus convallis.</li>\n          <li class="box" id="field10" data-comment-block>Etiam mattis nibh eu sollicitudin hendrerit.</li>\n          <li class="box" id="field11" data-comment-block>Cras convallis ipsum at risus suscipit sodales.</li>\n          <li class="box" id="field12" data-comment-block>Proin sit amet turpis mattis nunc sagittis dapibus.</li>\n        </ul>\n      </div>\n\n      <h2>Heading for section 4</h2>\n\n      <div id="section4" data-comment-section="Section 4">\n        <div id="field13" data-comment-inline>\n          Aliquam scelerisque mauris non aliquet iaculis. Nullam egestas urna risus,\n          nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit\n          ut at diam. Vivamus pretium erat non enim hendrerit, id auctor metus lobortis.\n          Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc\n          in tortor non arcu suscipit vestibulum at nec neque. Vivamus fringilla velit arcu,\n          in hendrerit turpis dignissim vel. Duis imperdiet lobortis tortor non ultrices.\n          Cras pretium dui a turpis condimentum, sit amet sollicitudin diam auctor. In porta\n          neque sit amet turpis tempus egestas.\n        </div>\n      </div>\n    </main>\n    <footer>\n      Footer content\n    </footer>\n  </body>\n</html>\n',demoAgent={type:"Person",id:"0123456",name:"Chase",email:"mcmanning.1@osu.edu",nickname:"mcmanning.1"},Simple={render:args=>(0,jsx_runtime.jsx)(AnnotationsProvider.g,{documentId:"mock-document",initialItems:shortFormAnnotations,agent:demoAgent,role:"Reviewer",children:(0,jsx_runtime.jsx)(ExternalDocument,{content:args.content})}),args:{content:demoContent}},AlignmentTest={render:args=>(0,jsx_runtime.jsxs)(AnnotationsProvider.g,{documentId:"mock-document",initialItems:shortFormAnnotations,agent:demoAgent,role:"Reviewer",children:[(0,jsx_runtime.jsxs)(index_module.Kq,{align:"stretch",children:[(0,jsx_runtime.jsx)(index_module.X6,{level:1,children:"Heading 1"}),(0,jsx_runtime.jsx)(index_module.Xk,{bgc:"aqua",c:"aqua-contrast",p:"sm",children:"Some heading content"})]}),(0,jsx_runtime.jsxs)(index_module.ZA,{children:[(0,jsx_runtime.jsx)(index_module.Xk,{bgc:"blue",c:"blue-contrast",miw:400,h:500,p:"sm",children:"Some aside content"}),(0,jsx_runtime.jsx)(ExternalDocument,{content:args.content})]})]}),args:{content:demoContent}},StressTest={render:args=>{const fields=[...Array(100)].map(((_,i)=>`\n      <div>\n        <strong>Long field ${i}><strong>\n        <div id="field${i}" data-comment-inline>\n          <p>Aliquam scelerisque mauris non aliquet iaculis. Nullam egestas urna risus,\n          nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit\n          ut at diam. Vivamus pretium erat non enim hendrerit, id auctor metus lobortis.</p>\n\n          <p>Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc\n          in tortor non arcu suscipit vestibulum at nec neque.</p>\n\n          <ul>\n            <li>Curabitur vel turpis nec odio consequat vulputate ac non enim.</li>\n            <li>Ut pulvinar lacus id ipsum maximus convallis.</li>\n            <li>Etiam mattis nibh eu sollicitudin hendrerit.</li>\n            <li>Cras convallis ipsum at risus suscipit sodales.</li>\n            <li>Proin sit amet turpis mattis nunc sagittis dapibus.</li>\n          </ul>\n\n          <p>Vivamus fringilla velit arcu,\n          in hendrerit turpis dignissim vel. Duis imperdiet lobortis tortor non ultrices.\n          Cras pretium dui a turpis condimentum, sit amet sollicitudin diam auctor. In porta\n          neque sit amet turpis tempus egestas.</p>\n        </div>\n      </div>\n    `));return(0,jsx_runtime.jsx)(AnnotationsProvider.g,{documentId:"mock-document",initialItems:annotations,agent:demoAgent,role:"Reviewer",children:(0,jsx_runtime.jsx)(ExternalDocument,{...args,content:`\n          <!DOCTYPE html>\n          <html>\n            <head>\n              <style>\n                * {\n                  color: purple !important;\n                }\n                h1 {\n                  color: green !important;\n                }\n              </style>\n            </head>\n            <body>\n              <header>\n                Header content\n              </header>\n              <main>\n                <h1>Heading level 1</h1>\n                ${fields.join("")}\n              </main>\n              <footer>\n                Footer content\n              </footer>\n            </body>\n          </html>\n          `})})}},__namedExportsOrder=["Simple","AlignmentTest","StressTest"];Simple.parameters={...Simple.parameters,docs:{...Simple.parameters?.docs,source:{originalSource:'{\n  render: args => /*#__PURE__*/_jsx(AnnotationsProvider, {\n    documentId: "mock-document",\n    initialItems: shortFormAnnotations,\n    agent: demoAgent,\n    role: "Reviewer",\n    children: /*#__PURE__*/_jsx(ExternalDocument, {\n      content: args.content\n    })\n  }),\n  args: {\n    content: demoContent\n  }\n}',...Simple.parameters?.docs?.source}}},AlignmentTest.parameters={...AlignmentTest.parameters,docs:{...AlignmentTest.parameters?.docs,source:{originalSource:'{\n  render: args => /*#__PURE__*/_jsxs(AnnotationsProvider, {\n    documentId: "mock-document",\n    initialItems: shortFormAnnotations,\n    agent: demoAgent,\n    role: "Reviewer",\n    children: [/*#__PURE__*/_jsxs(Stack, {\n      align: "stretch",\n      children: [/*#__PURE__*/_jsx(Heading, {\n        level: 1,\n        children: "Heading 1"\n      }), /*#__PURE__*/_jsx(Paper, {\n        bgc: "aqua",\n        c: "aqua-contrast",\n        p: "sm",\n        children: "Some heading content"\n      })]\n    }), /*#__PURE__*/_jsxs(Group, {\n      children: [/*#__PURE__*/_jsx(Paper, {\n        bgc: "blue",\n        c: "blue-contrast",\n        miw: 400,\n        h: 500,\n        p: "sm",\n        children: "Some aside content"\n      }), /*#__PURE__*/_jsx(ExternalDocument, {\n        content: args.content\n      })]\n    })]\n  }),\n  args: {\n    content: demoContent\n  }\n}',...AlignmentTest.parameters?.docs?.source}}},StressTest.parameters={...StressTest.parameters,docs:{...StressTest.parameters?.docs,source:{originalSource:'{\n  render: args => {\n    const fields = [...Array(100)].map((_, i) => `\n      <div>\n        <strong>Long field ${i}><strong>\n        <div id="field${i}" data-comment-inline>\n          <p>Aliquam scelerisque mauris non aliquet iaculis. Nullam egestas urna risus,\n          nec sodales nisl facilisis sed. Duis vitae velit sed ipsum consectetur blandit\n          ut at diam. Vivamus pretium erat non enim hendrerit, id auctor metus lobortis.</p>\n\n          <p>Suspendisse tellus dui, ullamcorper vel laoreet et, condimentum ut justo. Nunc\n          in tortor non arcu suscipit vestibulum at nec neque.</p>\n\n          <ul>\n            <li>Curabitur vel turpis nec odio consequat vulputate ac non enim.</li>\n            <li>Ut pulvinar lacus id ipsum maximus convallis.</li>\n            <li>Etiam mattis nibh eu sollicitudin hendrerit.</li>\n            <li>Cras convallis ipsum at risus suscipit sodales.</li>\n            <li>Proin sit amet turpis mattis nunc sagittis dapibus.</li>\n          </ul>\n\n          <p>Vivamus fringilla velit arcu,\n          in hendrerit turpis dignissim vel. Duis imperdiet lobortis tortor non ultrices.\n          Cras pretium dui a turpis condimentum, sit amet sollicitudin diam auctor. In porta\n          neque sit amet turpis tempus egestas.</p>\n        </div>\n      </div>\n    `);\n    return /*#__PURE__*/_jsx(AnnotationsProvider, {\n      documentId: "mock-document",\n      initialItems: annotations,\n      agent: demoAgent,\n      role: "Reviewer",\n      children: /*#__PURE__*/_jsx(ExternalDocument, {\n        ...args,\n        content: `\n          <!DOCTYPE html>\n          <html>\n            <head>\n              <style>\n                * {\n                  color: purple !important;\n                }\n                h1 {\n                  color: green !important;\n                }\n              </style>\n            </head>\n            <body>\n              <header>\n                Header content\n              </header>\n              <main>\n                <h1>Heading level 1</h1>\n                ${fields.join(\'\')}\n              </main>\n              <footer>\n                Footer content\n              </footer>\n            </body>\n          </html>\n          `\n      })\n    });\n  }\n}',...StressTest.parameters?.docs?.source}}}}}]);
//# sourceMappingURL=src-components-ExternalDocument-ExternalDocument-stories.7a8ce9f0.iframe.bundle.js.map